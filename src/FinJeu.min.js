"use strict";var CasseBrique=CasseBrique||{};CasseBrique.FinJeu=function(){this.sonVictoire=null,this.sonDefaite=null},CasseBrique.FinJeu.prototype={create:function(){if(this.add.image(0,0,"finImg"),CasseBrique.meilleurScore=null===localStorage.getItem(CasseBrique.NOM_LOCAL_STORAGE_SCORE)?0:localStorage.getItem(CasseBrique.NOM_LOCAL_STORAGE_SCORE),CasseBrique.meilleurScore=Math.max(CasseBrique.score,CasseBrique.meilleurScore),CasseBrique.nbNiveau>5){CasseBrique.meilleurTemps=null==localStorage.getItem(CasseBrique.NOM_LOCAL_STORAGE_TEMPS)?0:localStorage.getItem(CasseBrique.NOM_LOCAL_STORAGE_TEMPS),CasseBrique.meilleurTemps=Math.max(CasseBrique.tempsJeu,CasseBrique.meilleurTemps),localStorage.setItem(CasseBrique.NOM_LOCAL_STORAGE_TEMPS,CasseBrique.meilleurTemps);var e="FÉLICITATIONS !!\n",t="Vous avez complété les 5 niveaux du jeu ! Bravo !\n",s="Votre score: "+CasseBrique.score,i="Temps: "+CasseBrique.tempsJeu+"s",a="Meilleur score: "+CasseBrique.meilleurScore,r="Meilleur Temps: "+CasseBrique.meilleurTemps+"s";this.sonVictoire=this.add.audio("sonApplaudissement",1).play()}else{e="FIN DU JEU";t="Vous avez échoué au niveau "+CasseBrique.nbNiveau+" . Perseverez !";var s="Votre score: "+CasseBrique.score,a="Meilleur score: "+CasseBrique.meilleurScore;this.sonDefaite=this.add.audio("sonMusicTriste",1).play()}var h={font:"bold 60px Arial",fill:"#FFFFFF",align:"center"};this.add.text(this.game.width/2,10,e,h).anchor.set(.5,0);var u={font:"bold 38px ARIAL",fill:"#FFFFFF",align:"center"};this.add.text(this.game.width/2,.3*this.game.height,t,u).anchor.set(.5,1);var o={font:"bold 30px ARIAL",fill:"#FFFFFF",align:"center"};if(this.game.device.desktop){l=this.add.text(-180,.4*this.game.height,i,o);this.add.tween(l).to({x:this.game.width/2,y:l.y},2e3,Phaser.Easing.Exponential.InOut,!0,250,0,!1);n=this.add.text(-180,.5*this.game.height,s,o);this.add.tween(n).to({x:this.game.width/2,y:n.y},2e3,Phaser.Easing.Exponential.InOut,!0,0,0,!1);d=this.add.text(-180,.6*this.game.height,r,o);this.add.tween(d).to({x:this.game.width/2,y:d.y},2e3,Phaser.Easing.Exponential.InOut,!0,750,0,!1);m=this.add.text(-180,.7*this.game.height,a,o);this.add.tween(m).to({x:this.game.width/2,y:m.y},2e3,Phaser.Easing.Exponential.InOut,!0,500,0,!1);g=this.add.button(this.game.width/2,1.1*this.game.height,"rejouerBtn",this.rejouer,this,1,0,2,0);this.add.tween(g).to({x:g.x,y:.88*this.game.height},2e3,Phaser.Easing.Exponential.InOut,!0,1250,0,!1)}else var l=this.add.text(this.game.width/2,.4*this.game.height,i,o),n=this.add.text(this.game.width/2,.5*this.game.height,s,o),d=this.add.text(this.game.width/2,.6*this.game.height,r,o),m=this.add.text(this.game.width/2,.7*this.game.height,a,o),g=this.add.button(this.game.width/2,.88*this.game.height,"rejouerBtn",this.rejouer,this,1,0,2,0);l.anchor.set(.5),n.anchor.set(.5),d.anchor.set(.5),m.anchor.set(.5),g.anchor.set(.5),CasseBrique.meilleurScore=Math.max(CasseBrique.score,CasseBrique.meilleurScore),localStorage.setItem(CasseBrique.NOM_LOCAL_STORAGE_SCORE,CasseBrique.meilleurScore)},rejouer:function(){this.game.state.start("Jeu"),CasseBrique.nbNiveau>5?this.sonVictoire.stop():this.sonDefaite.stop()}};